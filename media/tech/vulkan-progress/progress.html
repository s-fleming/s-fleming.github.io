<!DOCTYPE html>
<!-- saved from url=(0011)about:blank -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta charset="" utf-8""="">
    <!--<base href="">--><base href=".">
    <style>
        :root { --vs-scrollbar: #2e2e2e; --vs-scrollbar-thumb: #4d4d4d; --vs-scrollbar-hover: #999999;}
        html, body {margin: 6px; padding-bottom:10px}
        body {
    background: #1f1f1f
}
.markdown-body {
    color-scheme: dark;
    -ms-text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
    margin: 0;
    color: #c9d1d9;
    background-color: #1f1f1f;
    font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";
    font-size: 16px;
    line-height: 1.5;
    word-wrap: break-word;
}

/* Begin scrollbar theming */
/* Chromium quirk: we have to set width, otherwise nothing is changed */
::-webkit-scrollbar {
    width: 18px;
    background: var(--vs-scrollbar);
}

::-webkit-scrollbar-track {
    background: var(--vs-scrollbar);
    border-radius: 0px;
}

::-webkit-scrollbar-thumb {
    background: var(--vs-scrollbar-thumb);
    border: 3px solid var(--vs-scrollbar);
    border-radius: 0px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--vs-scrollbar-hover);
}

::-webkit-scrollbar-thumb:active {
    background: var(--vs-scrollbar-hover);
}

::-webkit-scrollbar-thumb:vertical {
    min-height: 40px;
}

::-webkit-scrollbar-button {
    width: 18px;
    height: 18px;
    background: var(--vs-scrollbar);
}

::-webkit-scrollbar-button:hover {
    background: var(--vs-scrollbar-hover);
}

::-webkit-scrollbar-button:active {
    background: var(--vs-scrollbar-hover);
}

/* todo: use a correctly themed triangle instead of a fixed color chevron */
::-webkit-scrollbar-button:vertical:start {
    width: 18px;
    height: 18px;
    background-repeat: no-repeat;
    background-position: center;
    background-image: url(data:image/png;base64,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)
}

/* todo: use a correctly themed triangle instead of a fixed color chevron */
::-webkit-scrollbar-button:vertical:end {
    width: 18px;
    height: 18px;
    background-repeat: no-repeat;
    background-position: center;
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAICAYAAAAvOAWIAAAKpGlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUE9kax+/MpBdaAAEpoffeQXoNXTqISkgoocSYEEBERURUYC2oiIANXaqCq1JkLYAotkXBgn2DLCrquliwofIGeIT33nl73nn/Offkd7755rvf3Ln3nH8AoFxm8njpsBQAGdxMfqiPOz06JpaOFwEIvYjopcRkCXhuISEB4G/18S6ai+qW8XStv8/7r5JmJwpYAEAhKCewBawMlE+h4ziLx88EAGGjcc3sTN40b0ZZlo82iHL1NCfP8vFpTpjl3pmc8FAPlO8BQKAwmfxkAMh/oHF6FisZrUPBoGzGZXO4KFuh7MxKYaLzUNB7wCgjY8U0H0RZL+Ff6iT/W80EcU0mM1nMs+8yI4InR8BLZ676P5fjfysjXTg3hwY6KCl839Dp+dA1q09b4S9mbkJQ8Bxz2LM9TXOK0DdijlkCj9g5ZjM9/edYmBbhNsdM/vyznExG+BzzV4SK6ycKvMLE9RMZAeIe0oPEnMTxZsxxbkp41BxncSKD5liQFuY/n+MhjvOFoeKek/je4nfMEMz3xmLO95CZEu4731u0uAd2oqeXOM6NEOfzMt3FNXnpIeL8xHQfcVyQFSZ+NhPdYHOcyvQLma8TIl4fwAGBgAlYmYk50/sKeKzgreJzklMy6W7oKUmkM7gsEyO6hZm5DQDTZ272k76/N3OWIHnCfExwGwAHHTTInY8tKwKg0xYA2p/zMa08dB8eBuDsIEvIz5qNTW91gAUkIAlkgSJQBZpADxgDC2ADHIEr8AJ+IBiEgxiwDLBACsgAfJAN8sB6UARKwHawG1SCA+AwqAfHwAnQDs6AbnAJXAM3wR3wEIjAKHgFxsFHMAlBEB6iQjRIEVKDtCFDyAKyg5whLygACoVioHgoGeJCQigP2gCVQGVQJXQIaoB+gU5D3dAVaAC6Dw1DY9A76CuMwBRYFlaBdWBT2A52g/3hcHgpnAyvhHPhQngrXAHXwEfhNrgbvgbfgUXwK3gCAQgZkUfUEWPEDvFAgpFYJAnhI2uRYqQcqUGakU6kD7mFiJDXyBcMDkPD0DHGGEeMLyYCw8KsxKzFlGIqMfWYNkwv5hZmGDOO+YGlYpWxhlgHLAMbjU3GZmOLsOXYWmwr9iL2DnYU+xGHw8njdHG2OF9cDC4VtxpXituHa8F14QZwI7gJPB6viDfEO+GD8Ux8Jr4Ivxd/FH8eP4gfxX8mkAlqBAuCNyGWwCUUEMoJjYRzhEHCc8IkUYqoTXQgBhPZxFXEbcQjxE7iDeIocZIkTdIlOZHCSamk9aQKUjPpIukR6T2ZTNYg25MXkznkfHIF+Tj5MnmY/IUiQzGgeFDiKELKVkodpYtyn/KeSqXqUF2psdRM6lZqA/UC9Qn1swRNwkSCIcGWWCdRJdEmMSjxRpIoqS3pJrlMMleyXPKk5A3J11JEKR0pDymm1FqpKqnTUkNSE9I0aXPpYOkM6VLpRukr0i9k8DI6Ml4ybJlCmcMyF2RGaAhNk+ZBY9E20I7QLtJGZXGyurIM2VTZEtljsv2y43IyclZykXI5clVyZ+VE8oi8jjxDPl1+m/wJ+bvyXxeoLHBbkLhgy4LmBYMLPiksVHBVSFQoVmhRuKPwVZGu6KWYprhDsV3xsRJGyUBpsVK20n6li0qvF8oudFzIWli88MTCB8qwsoFyqPJq5cPK15UnVFRVfFR4KntVLqi8VpVXdVVNVd2lek51TI2m5qzGUduldl7tJV2O7kZPp1fQe+nj6srqvupC9UPq/eqTGroaERoFGi0ajzVJmnaaSZq7NHs0x7XUtAK18rSatB5oE7XttFO092j3aX/S0dWJ0tmk067zQldBl6Gbq9uk+0iPqueit1KvRu+2Pk7fTj9Nf5/+TQPYwNogxaDK4IYhbGhjyDHcZzhghDWyN+Ia1RgNGVOM3YyzjJuMh03kTQJMCkzaTd6YapnGmu4w7TP9YWZtlm52xOyhuYy5n3mBeaf5OwsDC5ZFlcVtS6qlt+U6yw7Lt1aGVolW+63uWdOsA603WfdYf7exteHbNNuM2WrZxttW2w7ZydqF2JXaXbbH2rvbr7M/Y//FwcYh0+GEw1+Oxo5pjo2OLxbpLkpcdGTRiJOGE9PpkJPIme4c73zQWeSi7sJ0qXF56qrpynatdX3upu+W6nbU7Y27mTvfvdX9k4eDxxqPLk/E08ez2LPfS8YrwqvS64m3hneyd5P3uI+1z2qfLl+sr7/vDt8hhgqDxWhgjPvZ+q3x6/Wn+If5V/o/DTAI4Ad0BsKBfoE7Ax8FaQdxg9qDQTAjeGfw4xDdkJUhvy7GLQ5ZXLX4Wah5aF5oXxgtbHlYY9jHcPfwbeEPI/QihBE9kZKRcZENkZ+iPKPKokTRptFroq/FKMVwYjpi8bGRsbWxE0u8luxeMhpnHVcUd3ep7tKcpVeWKS1LX3Z2ueRy5vKT8dj4qPjG+G/MYGYNcyKBkVCdMM7yYO1hvWK7snexxxKdEssSnyc5JZUlvUh2St6ZPJbiklKe8prjwankvE31TT2Q+iktOK0ubSo9Kr0lg5ARn3GaK8NN4/auUF2Rs2KAZ8gr4olWOqzcvXKc78+vFUCCpYKOTFnU3FwX6gk3CoeznLOqsj5nR2afzJHO4eZcX2Wwasuq57neuT+vxqxmre7JU89bnze8xm3NobXQ2oS1Pes01xWuG833ya9fT1qftv63ArOCsoIPG6I2dBaqFOYXjmz02dhUJFHELxra5LjpwGbMZs7m/i2WW/Zu+VHMLr5aYlZSXvKtlFV69Sfznyp+mtqatLV/m822/dtx27nb7+5w2VFfJl2WWzayM3Bn2y76ruJdH3Yv332l3Kr8wB7SHuEeUUVARcderb3b936rTKm8U+Ve1VKtXL2l+tM+9r7B/a77mw+oHCg58PUg5+C9Qz6H2mp0asoP4w5nHX52JPJI3892PzfUKtWW1H6v49aJ6kPrextsGxoalRu3NcFNwqaxo3FHbx7zPNbRbNx8qEW+peQ4OC48/vKX+F/unvA/0XPS7mTzKe1T1a201uI2qG1V23h7SruoI6Zj4LTf6Z5Ox87WX01+rTujfqbqrNzZbedI5wrPTZ3PPT/Rxet63Z3cPdKzvOfhhegLt3sX9/Zf9L94+ZL3pQt9bn3nLztdPnPF4crpq3ZX26/ZXGu7bn299Tfr31r7bfrbbtje6Lhpf7NzYNHAuUGXwe5bnrcu3WbcvnYn6M7A3Yi794bihkT32Pde3E+///ZB1oPJh/mPsI+KH0s9Ln+i/KTmd/3fW0Q2orPDnsPXn4Y9fTjCGnn1h+CPb6OFz6jPyp+rPW94YfHizJj32M2XS16OvuK9mnxd9Kf0n9Vv9N6c+sv1r+vj0eOjb/lvp96Vvld8X/fB6kPPRMjEk48ZHyc/FX9W/Fz/xe5L39eor88ns7/hv1V81//e+cP/x6OpjKkpHpPPnLECCDrgpCQA3tUBQI1BvcNNAEgSs554RtCsj58h8Hc865tnhDqXui4Apq2Zfz4AB9FfnWlLio4QVwDCXQFsaSke/5QgydJitha5HbUm5VNT71EviNcH4PvQ1NRk+9TU91q02QcAdH2c9eLTwqH/UJqR7i+ejjeCtuaD/9A/AMP6AIl0f5ngAAAAmklEQVQYGWNgIAEwgtR2dXVFfvv2bXVDQ8MfZL1APgsXF1fonz9/zlZVVd1iAkn+//9/GScn50FkhSA2SAwkx8LCEgLigxUzMjIWAdlWQBvOgARBAMq2AskBbZ0EEgM7A8To6OiIAUosBjIPQ8VtgKbGVlRULAHJgwBcMYjT2dnpB6Q2gthA4F9eXr4JwsRBAm2IAGEc0sQLAwB01zTsJKQDAgAAAABJRU5ErkJggg==)
}
/* End scrollbar theming */

    .markdown-body .octicon {
        display: inline-block;
        fill: currentColor;
        vertical-align: text-bottom;
    }

    .markdown-body h1:hover .anchor .octicon-link:before,
    .markdown-body h2:hover .anchor .octicon-link:before,
    .markdown-body h3:hover .anchor .octicon-link:before,
    .markdown-body h4:hover .anchor .octicon-link:before,
    .markdown-body h5:hover .anchor .octicon-link:before,
    .markdown-body h6:hover .anchor .octicon-link:before {
        width: 16px;
        height: 16px;
        content: ' ';
        display: inline-block;
        background-color: currentColor;
        -webkit-mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
        mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
    }

    .markdown-body details,
    .markdown-body figcaption,
    .markdown-body figure {
        display: block;
    }

    .markdown-body summary {
        display: list-item;
    }

    .markdown-body [hidden] {
        display: none !important;
    }

    .markdown-body a {
        background-color: transparent;
        color: #58a6ff;
        text-decoration: none;
    }

        .markdown-body a:active,
        .markdown-body a:hover {
            outline-width: 0;
        }

    .markdown-body abbr[title] {
        border-bottom: none;
        text-decoration: underline dotted;
    }

    .markdown-body b,
    .markdown-body strong {
        font-weight: 600;
    }

    .markdown-body dfn {
        font-style: italic;
    }

    .markdown-body h1 {
        margin: .67em 0;
        font-weight: 600;
        padding-bottom: .3em;
        font-size: 2em;
        border-bottom: 1px solid #21262d;
    }

    .markdown-body mark {
        background-color: rgba(187,128,9,0.15);
        color: #c9d1d9;
    }

    .markdown-body small {
        font-size: 90%;
    }

    .markdown-body sub,
    .markdown-body sup {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
    }

    .markdown-body sub {
        bottom: -0.25em;
    }

    .markdown-body sup {
        top: -0.5em;
    }

    .markdown-body img {
        border-style: none;
        max-width: 100%;
        box-sizing: content-box;
        background-color: #1f1f1f;
    }

    .markdown-body code,
    .markdown-body kbd,
    .markdown-body pre,
    .markdown-body samp {
        font-family: monospace,monospace;
        font-size: 1em;
    }

    .markdown-body figure {
        margin: 1em 40px;
    }

    .markdown-body hr {
        box-sizing: content-box;
        overflow: hidden;
        background: transparent;
        border-bottom: 1px solid #21262d;
        height: .25em;
        padding: 0;
        margin: 24px 0;
        background-color: #30363d;
        border: 0;
    }

    .markdown-body input {
        font: inherit;
        margin: 0;
        overflow: visible;
        font-family: inherit;
        font-size: inherit;
        line-height: inherit;
    }

    .markdown-body [type=button],
    .markdown-body [type=reset],
    .markdown-body [type=submit] {
        -webkit-appearance: button;
    }

        .markdown-body [type=button]::-moz-focus-inner,
        .markdown-body [type=reset]::-moz-focus-inner,
        .markdown-body [type=submit]::-moz-focus-inner {
            border-style: none;
            padding: 0;
        }

        .markdown-body [type=button]:-moz-focusring,
        .markdown-body [type=reset]:-moz-focusring,
        .markdown-body [type=submit]:-moz-focusring {
            outline: 1px dotted ButtonText;
        }

    .markdown-body [type=checkbox],
    .markdown-body [type=radio] {
        box-sizing: border-box;
        padding: 0;
    }

    .markdown-body [type=number]::-webkit-inner-spin-button,
    .markdown-body [type=number]::-webkit-outer-spin-button {
        height: auto;
    }

    .markdown-body [type=search] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
    }

        .markdown-body [type=search]::-webkit-search-cancel-button,
        .markdown-body [type=search]::-webkit-search-decoration {
            -webkit-appearance: none;
        }

    .markdown-body ::-webkit-input-placeholder {
        color: inherit;
        opacity: .54;
    }

    .markdown-body ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
    }

    .markdown-body a:hover {
        text-decoration: underline;
    }

    .markdown-body hr::before {
        display: table;
        content: "";
    }

    .markdown-body hr::after {
        display: table;
        clear: both;
        content: "";
    }

    .markdown-body table {
        border-spacing: 0;
        border-collapse: collapse;
        display: block;
        width: max-content;
        max-width: 100%;
        overflow: auto;
    }

    .markdown-body td,
    .markdown-body th {
        padding: 0;
    }

    .markdown-body details summary {
        cursor: pointer;
    }

    .markdown-body details:not([open]) > *:not(summary) {
        display: none !important;
    }

    .markdown-body kbd {
        display: inline-block;
        padding: 3px 5px;
        font: 11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
        line-height: 10px;
        color: #c9d1d9;
        vertical-align: middle;
        background-color: #161b22;
        border: solid 1px rgba(110,118,129,0.4);
        border-bottom-color: rgba(110,118,129,0.4);
        border-radius: 6px;
        box-shadow: inset 0 -1px 0 rgba(110,118,129,0.4);
    }

    .markdown-body h1,
    .markdown-body h2,
    .markdown-body h3,
    .markdown-body h4,
    .markdown-body h5,
    .markdown-body h6 {
        margin-top: 24px;
        margin-bottom: 16px;
        font-weight: 600;
        line-height: 1.25;
    }

    .markdown-body h2 {
        font-weight: 600;
        padding-bottom: .3em;
        font-size: 1.5em;
        border-bottom: 1px solid #21262d;
    }

    .markdown-body h3 {
        font-weight: 600;
        font-size: 1.25em;
    }

    .markdown-body h4 {
        font-weight: 600;
        font-size: 1em;
    }

    .markdown-body h5 {
        font-weight: 600;
        font-size: .875em;
    }

    .markdown-body h6 {
        font-weight: 600;
        font-size: .85em;
        color: #8b949e;
    }

    .markdown-body p {
        margin-top: 0;
        margin-bottom: 10px;
    }

    .markdown-body blockquote {
        margin: 0;
        padding: 0 1em;
        color: #8b949e;
        border-left: .25em solid #30363d;
    }

    .markdown-body ul {
        list-style: disc
    }

    .markdown-body ul,
    .markdown-body ol {
        margin-top: 0;
        margin-bottom: 0;
        padding-left: 2em;
    }

        .markdown-body ol ol,
        .markdown-body ul ol {
            list-style-type: lower-roman;
        }

            .markdown-body ul ul ol,
            .markdown-body ul ol ol,
            .markdown-body ol ul ol,
            .markdown-body ol ol ol {
                list-style-type: lower-alpha;
            }

    .markdown-body dd {
        margin-left: 0;
    }

    .markdown-body tt,
    .markdown-body code {
        font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
        font-size: 12px;
    }

    .markdown-body pre {
        margin-top: 0;
        margin-bottom: 0;
        font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
        font-size: 12px;
        word-wrap: normal;
    }

    .markdown-body .octicon {
        display: inline-block;
        overflow: visible !important;
        vertical-align: text-bottom;
        fill: currentColor;
    }

    .markdown-body ::placeholder {
        color: #484f58;
        opacity: 1;
    }

    .markdown-body input::-webkit-outer-spin-button,
    .markdown-body input::-webkit-inner-spin-button {
        margin: 0;
        -webkit-appearance: none;
        appearance: none;
    }

    .markdown-body .pl-c {
        color: #8b949e;
    }

    .markdown-body .pl-c1,
    .markdown-body .pl-s .pl-v {
        color: #79c0ff;
    }

    .markdown-body .pl-e,
    .markdown-body .pl-en {
        color: #d2a8ff;
    }

    .markdown-body .pl-smi,
    .markdown-body .pl-s .pl-s1 {
        color: #c9d1d9;
    }

    .markdown-body .pl-ent {
        color: #7ee787;
    }

    .markdown-body .pl-k {
        color: #ff7b72;
    }

    .markdown-body .pl-s,
    .markdown-body .pl-pds,
    .markdown-body .pl-s .pl-pse .pl-s1,
    .markdown-body .pl-sr,
    .markdown-body .pl-sr .pl-cce,
    .markdown-body .pl-sr .pl-sre,
    .markdown-body .pl-sr .pl-sra {
        color: #a5d6ff;
    }

    .markdown-body .pl-v,
    .markdown-body .pl-smw {
        color: #ffa657;
    }

    .markdown-body .pl-bu {
        color: #f85149;
    }

    .markdown-body .pl-ii {
        color: #f0f6fc;
        background-color: #8e1519;
    }

    .markdown-body .pl-c2 {
        color: #f0f6fc;
        background-color: #b62324;
    }

    .markdown-body .pl-sr .pl-cce {
        font-weight: bold;
        color: #7ee787;
    }

    .markdown-body .pl-ml {
        color: #f2cc60;
    }

    .markdown-body .pl-mh,
    .markdown-body .pl-mh .pl-en,
    .markdown-body .pl-ms {
        font-weight: bold;
        color: #1f6feb;
    }

    .markdown-body .pl-mi {
        font-style: italic;
        color: #c9d1d9;
    }

    .markdown-body .pl-mb {
        font-weight: bold;
        color: #c9d1d9;
    }

    .markdown-body .pl-md {
        color: #ffdcd7;
        background-color: #67060c;
    }

    .markdown-body .pl-mi1 {
        color: #aff5b4;
        background-color: #033a16;
    }

    .markdown-body .pl-mc {
        color: #ffdfb6;
        background-color: #5a1e02;
    }

    .markdown-body .pl-mi2 {
        color: #c9d1d9;
        background-color: #1158c7;
    }

    .markdown-body .pl-mdr {
        font-weight: bold;
        color: #d2a8ff;
    }

    .markdown-body .pl-ba {
        color: #8b949e;
    }

    .markdown-body .pl-sg {
        color: #484f58;
    }

    .markdown-body .pl-corl {
        text-decoration: underline;
        color: #a5d6ff;
    }

    .markdown-body [data-catalyst] {
        display: block;
    }

    .markdown-body g-emoji {
        font-family: "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
        font-size: 1em;
        font-style: normal !important;
        font-weight: 400;
        line-height: 1;
        vertical-align: -0.075em;
    }

        .markdown-body g-emoji img {
            width: 1em;
            height: 1em;
        }

    .markdown-body::before {
        display: table;
        content: "";
    }

    .markdown-body::after {
        display: table;
        clear: both;
        content: "";
    }

    .markdown-body > *:first-child {
        margin-top: 0 !important;
    }

    .markdown-body > *:last-child {
        margin-bottom: 0 !important;
    }

    .markdown-body a:not([href]) {
        color: inherit;
        text-decoration: none;
    }

    .markdown-body .absent {
        color: #f85149;
    }

    .markdown-body .anchor {
        float: left;
        padding-right: 4px;
        margin-left: -20px;
        line-height: 1;
    }

        .markdown-body .anchor:focus {
            outline: none;
        }

    .markdown-body p,
    .markdown-body blockquote,
    .markdown-body ul,
    .markdown-body ol,
    .markdown-body dl,
    .markdown-body table,
    .markdown-body pre,
    .markdown-body details {
        margin-top: 0;
        margin-bottom: 16px;
    }

        .markdown-body blockquote > :first-child {
            margin-top: 0;
        }

        .markdown-body blockquote > :last-child {
            margin-bottom: 0;
        }

    .markdown-body sup > a::before {
        content: "[";
    }

    .markdown-body sup > a::after {
        content: "]";
    }

    .markdown-body h1 .octicon-link,
    .markdown-body h2 .octicon-link,
    .markdown-body h3 .octicon-link,
    .markdown-body h4 .octicon-link,
    .markdown-body h5 .octicon-link,
    .markdown-body h6 .octicon-link {
        color: #c9d1d9;
        vertical-align: middle;
        visibility: hidden;
    }

    .markdown-body h1:hover .anchor,
    .markdown-body h2:hover .anchor,
    .markdown-body h3:hover .anchor,
    .markdown-body h4:hover .anchor,
    .markdown-body h5:hover .anchor,
    .markdown-body h6:hover .anchor {
        text-decoration: none;
    }

        .markdown-body h1:hover .anchor .octicon-link,
        .markdown-body h2:hover .anchor .octicon-link,
        .markdown-body h3:hover .anchor .octicon-link,
        .markdown-body h4:hover .anchor .octicon-link,
        .markdown-body h5:hover .anchor .octicon-link,
        .markdown-body h6:hover .anchor .octicon-link {
            visibility: visible;
        }

    .markdown-body h1 tt,
    .markdown-body h1 code,
    .markdown-body h2 tt,
    .markdown-body h2 code,
    .markdown-body h3 tt,
    .markdown-body h3 code,
    .markdown-body h4 tt,
    .markdown-body h4 code,
    .markdown-body h5 tt,
    .markdown-body h5 code,
    .markdown-body h6 tt,
    .markdown-body h6 code {
        padding: 0 .2em;
        font-size: inherit;
    }

    .markdown-body ul.no-list,
    .markdown-body ol.no-list {
        padding: 0;
        list-style-type: none;
    }

    .markdown-body ol[type="1"] {
        list-style-type: decimal;
    }

    .markdown-body ol[type=a] {
        list-style-type: lower-alpha;
    }

    .markdown-body ol[type=i] {
        list-style-type: lower-roman;
    }

    .markdown-body div > ol:not([type]) {
        list-style-type: decimal;
    }

    .markdown-body ul ul,
    .markdown-body ul ol,
    .markdown-body ol ol,
    .markdown-body ol ul {
        margin-top: 0;
        margin-bottom: 0;
    }

    .markdown-body li > p {
        margin-top: 16px;
    }

    .markdown-body li + li {
        margin-top: .25em;
    }

    .markdown-body dl {
        padding: 0;
    }

        .markdown-body dl dt {
            padding: 0;
            margin-top: 16px;
            font-size: 1em;
            font-style: italic;
            font-weight: 600;
        }

        .markdown-body dl dd {
            padding: 0 16px;
            margin-bottom: 16px;
        }

    .markdown-body table th {
        font-weight: 600;
    }

    .markdown-body table th,
    .markdown-body table td {
        padding: 6px 13px;
        border: 1px solid #30363d;
    }

    .markdown-body table tr {
        background-color: #1f1f1f;
        border-top: 1px solid #21262d;
    }

        .markdown-body table tr:nth-child(2n) {
            background-color: #161b22;
        }

    .markdown-body table img {
        background-color: transparent;
    }

    .markdown-body img[align=right] {
        padding-left: 20px;
    }

    .markdown-body img[align=left] {
        padding-right: 20px;
    }

    .markdown-body .emoji {
        max-width: none;
        vertical-align: text-top;
        background-color: transparent;
    }

    .markdown-body span.frame {
        display: block;
        overflow: hidden;
    }

        .markdown-body span.frame > span {
            display: block;
            float: left;
            width: auto;
            padding: 7px;
            margin: 13px 0 0;
            overflow: hidden;
            border: 1px solid #30363d;
        }

        .markdown-body span.frame span img {
            display: block;
            float: left;
        }

        .markdown-body span.frame span span {
            display: block;
            padding: 5px 0 0;
            clear: both;
            color: #c9d1d9;
        }

    .markdown-body span.align-center {
        display: block;
        overflow: hidden;
        clear: both;
    }

        .markdown-body span.align-center > span {
            display: block;
            margin: 13px auto 0;
            overflow: hidden;
            text-align: center;
        }

        .markdown-body span.align-center span img {
            margin: 0 auto;
            text-align: center;
        }

    .markdown-body span.align-right {
        display: block;
        overflow: hidden;
        clear: both;
    }

        .markdown-body span.align-right > span {
            display: block;
            margin: 13px 0 0;
            overflow: hidden;
            text-align: right;
        }

        .markdown-body span.align-right span img {
            margin: 0;
            text-align: right;
        }

    .markdown-body span.float-left {
        display: block;
        float: left;
        margin-right: 13px;
        overflow: hidden;
    }

        .markdown-body span.float-left span {
            margin: 13px 0 0;
        }

    .markdown-body span.float-right {
        display: block;
        float: right;
        margin-left: 13px;
        overflow: hidden;
    }

        .markdown-body span.float-right > span {
            display: block;
            margin: 13px auto 0;
            overflow: hidden;
            text-align: right;
        }

    .markdown-body code,
    .markdown-body tt {
        padding: .2em .4em;
        margin: 0;
        font-size: 85%;
        background-color: rgba(110,118,129,0.4);
        border-radius: 6px;
    }

        .markdown-body code br,
        .markdown-body tt br {
            display: none;
        }

    .markdown-body del code {
        text-decoration: inherit;
    }

    .markdown-body pre code {
        font-size: 100%;
    }

    .markdown-body pre > code {
        padding: 0;
        margin: 0;
        word-break: normal;
        white-space: pre;
        background: transparent;
        border: 0;
    }

    .markdown-body .highlight {
        margin-bottom: 16px;
    }

        .markdown-body .highlight pre {
            margin-bottom: 0;
            word-break: normal;
        }

        .markdown-body .highlight pre,
        .markdown-body pre {
            padding: 16px;
            overflow: auto;
            font-size: 85%;
            line-height: 1.45;
            background-color: #161b22;
            border-radius: 6px;
        }

            .markdown-body pre code,
            .markdown-body pre tt {
                display: inline;
                max-width: auto;
                padding: 0;
                margin: 0;
                overflow: visible;
                line-height: inherit;
                word-wrap: normal;
                background-color: transparent;
                border: 0;
            }

    .markdown-body .csv-data td,
    .markdown-body .csv-data th {
        padding: 5px;
        overflow: hidden;
        font-size: 12px;
        line-height: 1;
        text-align: left;
        white-space: nowrap;
    }

    .markdown-body .csv-data .blob-num {
        padding: 10px 8px 9px;
        text-align: right;
        background: #1f1f1f;
        border: 0;
    }

    .markdown-body .csv-data tr {
        border-top: 0;
    }

    .markdown-body .csv-data th {
        font-weight: 600;
        background: #161b22;
        border-top: 0;
    }

    .markdown-body .footnotes {
        font-size: 12px;
        color: #8b949e;
        border-top: 1px solid #30363d;
    }

        .markdown-body .footnotes ol {
            padding-left: 16px;
        }

        .markdown-body .footnotes li {
            position: relative;
        }

            .markdown-body .footnotes li:target::before {
                position: absolute;
                top: -8px;
                right: -8px;
                bottom: -8px;
                left: -24px;
                pointer-events: none;
                content: "";
                border: 2px solid #1f6feb;
                border-radius: 6px;
            }

            .markdown-body .footnotes li:target {
                color: #c9d1d9;
            }

        .markdown-body .footnotes .data-footnote-backref g-emoji {
            font-family: monospace;
        }

    .markdown-body .task-list-item {
        list-style-type: none;
    }

        .markdown-body .task-list-item label {
            font-weight: 400;
        }

        .markdown-body .task-list-item.enabled label {
            cursor: pointer;
        }

        .markdown-body .task-list-item + .task-list-item {
            margin-top: 3px;
        }

        .markdown-body .task-list-item .handle {
            display: none;
        }

    .markdown-body .task-list-item-checkbox {
        margin: 0 .2em .25em -1.6em;
        vertical-align: middle;
    }

    .markdown-body .contains-task-list:dir(rtl) .task-list-item-checkbox {
        margin: 0 -1.6em .25em .2em;
    }

    .markdown-body ::-webkit-calendar-picker-indicator {
        filter: invert(50%);
    }

    </style>
    <title>Markdown Preview</title>
    <meta http-equiv="cache-control" content="no-cache">
</head>
<body>
    <div id="___markdown-content___" class="markdown-body"><h1 id="step-1"><a id="pragma-line-0"></a>Step 1</h1>
<p id="pragma-line-2">The first step was to follow the following Vulkan tutorial to draw a flat-shaded model.</p>
<p id="pragma-line-4"><a href="https://vulkan-tutorial.com/Introduction">https://vulkan-tutorial.com/Introduction</a></p>
<p id="pragma-line-6"><img src="001_house.png" alt="House"></p>
<p id="pragma-line-8">.<br>
.<br>
.<br>
.<br>
.<br>
.</p>
<h1 id="step-2"><a id="pragma-line-15"></a>Step 2</h1>
<p id="pragma-line-17">The second step was to load albedo, normal and metal-roughness map and stuff them into a texture array.</p>
<p id="pragma-line-19"><a href="http://kylehalladay.com/blog/tutorial/vulkan/2018/01/28/Textue-Arrays-Vulkan.html">http://kylehalladay.com/blog/tutorial/vulkan/2018/01/28/Textue-Arrays-Vulkan.html</a></p>
<p id="pragma-line-21"><img src="002_textures.png" alt="Textures"></p>
<h2 id="change-the-fragment-shader-to-address-the-three-textures-as-a-single-array"><a id="pragma-line-23"></a>Change the fragment shader to address the three textures as a single array.</h2>
<pre><code id="pragma-line-24">#version 450
#extension GL_ARB_separate_shader_objects : enable

layout(set = 0, binding = 1) uniform sampler2D textures[ 3 ];

layout(location = 0) in vec3 fragColor;
layout(location = 1) in vec2 fragTexCoord;

layout(location = 0) out vec4 outColor;

void main() {
    outColor = vec4( texture( textures[ 0 ], fragTexCoord ).rgb, 1.0 );
}
</code></pre>
<p id="pragma-line-40">.<br>
.<br>
.<br>
.<br>
.<br>
.</p>
<h1 id="step-3"><a id="pragma-line-47"></a>Step 3</h1>
<p id="pragma-line-49">The next step was to add vertex normals in world-space.</p>
<p id="pragma-line-51"><img src="003_normals.png" alt="Vertex Normals"></p>
<h2 id="our-updated-vertex-struct-looks-like-this"><a id="pragma-line-53"></a>Our updated Vertex struct looks like this:</h2>
<pre><code id="pragma-line-54">struct Vertex {
	glm::vec3 pos;
	glm::vec3 color;
	glm::vec2 texCoord;
	glm::vec3 normal;

    ...

	static std::array&lt; VkVertexInputAttributeDescription, 4 &gt; getAttributeDescriptions() {
		std::array&lt; VkVertexInputAttributeDescription, 4&gt; attributeDescriptions = {};

        ...

		attributeDescriptions[3].binding = 0;
		attributeDescriptions[3].location = 3;
		attributeDescriptions[3].format = VK_FORMAT_R32G32B32_SFLOAT;
		attributeDescriptions[3].offset = offsetof(Vertex, normal);

		return attributeDescriptions;
	}

	bool operator==( const Vertex &amp; other ) const {
		return pos == other.pos &amp;&amp; color == other.color &amp;&amp; texCoord == other.texCoord &amp;&amp; normal == other.normal;
	}
};
</code></pre>
<h2 id="add-the-following-to-showmodel"><a id="pragma-line-82"></a>Add the following to ShowModel()</h2>
<pre><code id="pragma-line-83">    ...
    vertex.normal = {
        attrib.normals[ 3 * index.normal_index + 0 ],
        attrib.normals[ 3 * index.normal_index + 1 ],
        attrib.normals[ 3 * index.normal_index + 2 ]
    };
    ...
</code></pre>
<h2 id="the-vertex-shader-transforms-the-normal-into-world-space-and-divides-by-the-homogenous-coordinate"><a id="pragma-line-93"></a>The vertex shader transforms the normal into world-space and divides by the homogenous coordinate.</h2>
<pre><code id="pragma-line-94">...
layout(location = 0) in vec3 inPosition;
layout(location = 1) in vec3 inColor;
layout(location = 2) in vec2 inTexCoord;
layout(location = 3) in vec3 inNormal;

layout(location = 0) out vec3 fragColor;
layout(location = 1) out vec2 fragTexCoord;=
layout(location = 2) out vec3 fragNormal;

out gl_PerVertex {
    vec4 gl_Position;
};

void main() {
    gl_Position = ubo.proj * ubo.view * ubo.model * vec4(inPosition, 1.0);
    fragColor = inColor;
	fragTexCoord = inTexCoord;

    vec4 n = ubo.model * vec4( inNormal, 1.0f );
    fragNormal = n.xyz / n.w;
}
</code></pre>
<h2 id="finally-the-fragment-shader-displays-the-vertex-normal-that-has-been-scaled-to-the-positive-0-1-range"><a id="pragma-line-119"></a>Finally, the fragment shader displays the vertex normal that has been scaled to the positive 0-1 range.</h2>
<pre><code id="pragma-line-120">...
layout(location = 0) in vec3 fragColor;
layout(location = 1) in vec2 fragTexCoord;
layout(location = 2) in vec3 fragNormal;

layout(location = 0) out vec4 outColor;

void main() {
	outColor.xyz = fragNormal.xyz * 0.5f + 0.5f;
	outColor.w = 1.0f;
}
</code></pre>
<p id="pragma-line-134">.<br>
.<br>
.<br>
.<br>
.<br>
.</p>
<h1 id="step-4-add-the-light-buffer"><a id="pragma-line-141"></a>Step 4 - Add the light buffer</h1>
<p id="pragma-line-143"><img src="004_lightbuffer.png" alt="Light Buffer"></p>
<p id="pragma-line-145">The light buffer is a buffer of type VK_DESCRIPTOR_TYPE_STORAGE_BUFFER that stores all the lights and their properties.</p>
<p id="pragma-line-147">On the fragment side, it looks like the following.</p>
<pre><code id="pragma-line-148">layout(binding = 2) buffer Light {
	vec3 worldOrigin;
	float radius;
} lights;
</code></pre>
<p id="pragma-line-155">We output the dot product of the normalized light vector with the normalized vertex normal, which gives us the cosine of the angle of incidence.</p>
<pre><code id="pragma-line-157">	...
	vec3 lightVec = normalize( lights.worldOrigin - fragWorldPosition );
	float dp = max( dot( fragNormal, lightVec ), 0.0 );
	outColor.xyz = vec3( dp, dp, dp );
	...
</code></pre>
<p id="pragma-line-165">.<br>
.<br>
.<br>
.<br>
.<br>
.</p>
<h1 id="step-5-add-light-attenuation"><a id="pragma-line-172"></a>Step 5 - Add light attenuation</h1>
<p id="pragma-line-174">Linear attenuation fades the light as a fraction of the radius. Not physically accurate as well as changing brightness as the radius of the light changes.</p>
<pre><code id="pragma-line-176">	dp *= 1.0 - clamp( length( lights.worldOrigin - fragWorldPosition ) / lights.radius, 0.0, 1.0 );
</code></pre>
<p id="pragma-line-180"><img src="005_linearatten.png" alt="Linear Attenuation"></p>
<p id="pragma-line-182">Next we try inverse square falloff attenuation used in Unreal Engine.</p>
<pre><code id="pragma-line-184">	float distance = length( lights.worldOrigin - fragWorldPosition );
	float a = distance / lights.radius;
	float b = clamp( 1.0 - a * a * a * a, 0.0, 1.0 );
	float falloff = ( b * b ) / ( distance * distance + 1.0 );
	dp *= falloff;
</code></pre>
<p id="pragma-line-192"><img src="005_invsqatten.png" alt="Inverse Square Attenuation">\</p>
<p id="pragma-line-194">.<br>
.<br>
.<br>
.<br>
.<br>
.</p>
<h1 id="step-6-add-per-pixel-normals"><a id="pragma-line-201"></a>Step 6 - Add per-pixel normals</h1>
<p id="pragma-line-203"><img src="006_bumpynormals.png" alt="Per Pixel Normals"></p>
<ul id="pragma-line-205">
<li id="pragma-line-205">Merged in mikktspace.c from <a href="http://www.mikktspace.com/">mikktspace</a></li>
<li id="pragma-line-206">Combined mikktspace with tiny_obj_loader</li>
</ul>
<p id="pragma-line-208">Added the following to the vertex shader</p>
<pre><code id="pragma-line-209">    vec4 t = ubo.model * vec4( inTangent, 1.0f );
    t.xyz /= t.w;
    fragTangent = vec4( t.x, t.y, t.z, inBitangentSign );
</code></pre>
<p id="pragma-line-215">Added the following to the fragment shader</p>
<pre><code id="pragma-line-216">	vec3 vNt = vec4( texture( textures[ 2 ], fragTexCoord ).rgb, 1.0 ).xyz;
	vec3 vN = fragNormal;
	vec3 vT = fragTangent.xyz;
	vec3 vB = fragTangent.w * cross(vN, vT);
	vec3 vNout = normalize( vNt.x * vT + vNt.y * vB + vNt.z * vN );
</code></pre>
<h3 id="combining-the-normals-diffuse-gives-us-the-following"><a id="pragma-line-224"></a>Combining the normals + diffuse gives us the following:</h3>
<p id="pragma-line-226"><img src="006_diffusenormals.png" alt="Diffuse Normals"></p>
<p id="pragma-line-228">.<br>
.<br>
.<br>
.<br>
.<br>
.</p>
<h1 id="step-7-add-brightness-to-lights"><a id="pragma-line-235"></a>Step 7 - Add brightness to lights</h1>
<p id="pragma-line-237">Added a single float brightness to the light structure in the fragment shader and the cpp code.</p>
<pre><code id="pragma-line-238">layout(binding = 2) buffer Light {
	vec3 worldOrigin;
	float radius;
	float brightness;
} lights;
</code></pre>
<p id="pragma-line-246"><img src="007_brightness.png" alt="Light Brightness"></p>
<p id="pragma-line-248">The value here is 4.0 lumens.</p>
<h2 id="then-added-a-light-color-like-so"><a id="pragma-line-250"></a>Then added a light color like so:</h2>
<pre><code id="pragma-line-251">layout(binding = 2) buffer Light {
	vec3 worldOrigin;
	float radius;
	vec3 color;
	float brightness;
} lights;
</code></pre>
<p id="pragma-line-260">The final color is calculated like so:</p>
<pre><code id="pragma-line-261">	outColor.xyz = vec3( dp, dp, dp ) * baseColor.xyz * lights.brightness * lights.color;
</code></pre>
<p id="pragma-line-265">Here is a yellow light of (1.0, 1.0, 0.5) with a brightness of 4.0 lumens.</p>
<p id="pragma-line-267"><img src="007_lightcolor.png" alt="Light Color"></p>
<p id="pragma-line-269">.<br>
.<br>
.<br>
.<br>
.<br>
.</p>
<h1 id="step-8-handle-srgb-to-lrgb-conversion"><a id="pragma-line-276"></a>Step 8 - Handle sRGB to lRGB conversion</h1>
<p id="pragma-line-278">We need to convert the base color texture from sRGB to lRGB and the calculated light value from lRGB back to sRGB for storage in the framebuffer (since our framebuffer is VK_COLOR_SPACE_SRGB_NONLINEAR_KHR).</p>
<p id="pragma-line-280">I'm using the color space conversions from <a href="https://github.com/tobspr/GLSL-Color-Spaces/blob/master/ColorSpaces.inc.glsl">ColorSpaces.inc.glsl</a></p>
<p id="pragma-line-282">I switched the shader compiler from glslangValidator.exe to Google's glslc.exe that ships with the Vulkan SDK. This allows you to #include a file in the shaders.</p>
<p id="pragma-line-284">The new SPIR-V compile batch file is:</p>
<pre><code id="pragma-line-285">glslc.ex shader.vert -o vert.spv
glslc.exe shader.frag -o frag.spv
</code></pre>
<p id="pragma-line-290">Added the following to the top of shader.frag</p>
<pre><code id="pragma-line-291">#include "ColorSpaces.inc.glsl"
</code></pre>
<p id="pragma-line-295">The basecolor lookup now converts from sRGB to lRGB.</p>
<pre><code id="pragma-line-296">vec4 baseColor = vec4( srgb_to_rgb( texture( textures[ 0 ], fragTexCoord ).rgb ), 1.0 );
</code></pre>
<p id="pragma-line-300">The light color is converted from sRGB to lRGB. And finally the computed light value converts back from lRGB to sRGB for storage in the sRGB unnormalized framebuffer.</p>
<pre><code id="pragma-line-301">outColor.xyz = rgb_to_srgb( vec3( dp, dp, dp ) * baseColor.xyz * lights.brightness * srgb_to_rgb( lights.color ) );
</code></pre>
<p id="pragma-line-305"><img src="008_srgb.png" alt="sRGB Colors"></p>
<p id="pragma-line-307">.<br>
.<br>
.<br>
.<br>
.<br>
.</p>
<h1 id="step-9-various-fixes-to-match-blender"><a id="pragma-line-314"></a>Step 9 - Various Fixes to match Blender</h1>
<p id="pragma-line-316"><img src="009_fixes.png" alt="Fixes"></p>
<ul id="pragma-line-318">
<li id="pragma-line-318"><p id="pragma-line-318">You have to set Blender to measure the camera FOV in angles. It measures it in the horiztonal direction and glm expects the vertical FOV. Needed to multiple our FOV by the vertical / height aspect ratio to convert between the two.</p>
</li>
<li id="pragma-line-320"><p id="pragma-line-320">Proper conversion from Blender's Watts light power output to Lumens. 1 Watt = 683 lumens. So we set the watts in blender then multiply by 1 / 683. Finally, we need to divide by a 1000 to get lumens (Not sure why, but probably just so the Watts measurement is in whole numbers in blender ).</p>
</li>
<li id="pragma-line-322"><p id="pragma-line-322">Changed the width/height of camera to 1920/1080 since that's the default in Blender.</p>
</li>
<li id="pragma-line-324"><p id="pragma-line-324">The normals read from texture are in [0,1] range and centered around 0.5. We need [-1,1] so multiply them by 2 and subtract 1.</p>
</li>
<li id="pragma-line-326"><p id="pragma-line-326">Convert BaseColor from sRGB to linear texture color space.</p>
</li>
<li id="pragma-line-328"><p id="pragma-line-328">Clamp the roughness to [0.045,1] range and linear texture color space.</p>
</li>
<li id="pragma-line-330"><p id="pragma-line-330">Set the reflectance F0 value to 0.5.</p>
</li>
<li id="pragma-line-332"><p id="pragma-line-332">Use the metallic value directly with no modification and linear texture color space.</p>
</li>
</ul>
<p id="pragma-line-334">.<br>
.<br>
.<br>
.<br>
.<br>
.</p>
<h1 id="step-10-loading-exr-files-into-hdr-textures"><a id="pragma-line-341"></a>Step 10 - Loading EXR files into HDR textures</h1>
<p id="pragma-line-343">Planning Notes</p>
<ul id="pragma-line-344">
<li id="pragma-line-344">Need to load HDR images somehow so we can process them into light probes.</li>
<li id="pragma-line-345">Decided on loading Panographic sky images instead of Horizontal-Cross images as panos are more used by artists and art packages.</li>
<li id="pragma-line-346">Decided on EXR format as it is easy to read and write it using tinyexr library. While it is easy to load HDR pngs, it is not so easy to write them back out.</li>
<li id="pragma-line-347">Using zlib compression for EXR format.</li>
</ul>
<p id="pragma-line-349">Implementation Notes</p>
<ul id="pragma-line-350">
<li id="pragma-line-350">Had to hand off sRGB conversion to texture unit so we could have a mix of linear and sRGB images.</li>
</ul>
<p id="pragma-line-352">Below is the same texture loaded as EXR and TGA. Top row is EXR to a linear R32G32B32A32 texture and bottom row is 8-bit TGA to a R8G8B8A8 SRGB texture.
<img src="010_exrloading.png" alt="EXR Textures"></p>
<p id="pragma-line-355">.<br>
.<br>
.<br>
.<br>
.<br>
.</p>
<h1 id="step-11-environment-mapping-using-hdr-cubemap"><a id="pragma-line-362"></a>Step 11 - Environment Mapping using HDR Cubemap</h1>
<p id="pragma-line-364">Planning Notes</p>
<ul id="pragma-line-365">
<li id="pragma-line-365">Needed a way to store all mips of a cubemap on disk. Decided to store them as EXR format with each mip and side split out from the others. This will make debugging the light-probe generated cubemaps easier.</li>
</ul>
<p id="pragma-line-367">Implementation Notes</p>
<ul id="pragma-line-368">
<li id="pragma-line-368">Vulkan expects cubemaps to be stored in an indexed array with sides: front, back, up, down, right and finally left. Note that these images are stored in their natural orientation which, for the -Y and -X images is flipped 180 degreed compared to the vertical cross format.</li>
<li id="pragma-line-369">Each face is stored as a seperate EXR and is post-fixed with _nx for negative-x and _pz for positive-z, etc.</li>
</ul>
<p id="pragma-line-371">Below is the HDR environment map used from Paul Debevec's website, along with it being applied to a sphere and the test model.
<img src="011_envmapping.png" alt="Env Mapping"></p>
<p id="pragma-line-374">Below is the HDR environment map along with a test image showing the orientation as well as a graphic showing the vertical cross layout orientation in world-space. Note the -Y and -X faces are upside down in the vertical cross format. These two had to be flipped 180 degrees to be stored properly in the flat EXR format.
<img src="011_verticalcross.png" alt="Env Mapping"></p>
<p id="pragma-line-377">.<br>
.<br>
.<br>
.<br>
.<br>
.</p>
<h1 id="step-12-multiple-lights-and-refactor"><a id="pragma-line-384"></a>Step 12 - Multiple Lights and Refactor</h1>
<p id="pragma-line-386">Added multiple light support and refactored a bunch of stuff.</p>
<p id="pragma-line-388"><img src="012_multiplelights.png" alt="Multiple Lights"></p>
<p id="pragma-line-390">.<br>
.<br>
.<br>
.<br>
.<br>
.</p>
<h1 id="step-13-adding-background"><a id="pragma-line-397"></a>Step 13 - Adding Background</h1>
<ul id="pragma-line-399">
<li id="pragma-line-399">Added a background image derived from a pano map.</li>
</ul>
<p id="pragma-line-401"><img src="013_background.png" alt="Background"></p>
<ul id="pragma-line-403">
<li id="pragma-line-403">This is the pano that was used (from Blender).</li>
</ul>
<p id="pragma-line-405"><img src="013_pano.png" alt="Pano"></p>
<p id="pragma-line-407">.<br>
.<br>
.<br>
.<br>
.<br>
.</p>
<h1 id="step-14-ibl-generation-steps"><a id="pragma-line-414"></a>Step 14 - IBL Generation Steps</h1>
<p id="pragma-line-416">At runtime we will draw the model using the lights while also adding in the new ambient term, which will consist of the diffuse part of the IBL and the specular part added together. The diffuse contribution will be stored in a cubemap as the infalling radiation (irradiance) from the environment map and is calculated through convolution which is a blurring process to remove any high frequency detail.</p>
<p id="pragma-line-418">So what do we need to calculate this? We need to draw six views, where each view's frustum is aligned to a direction the world axis representing a face of the cubemap. We draw a sphere with the pano map mapped onto it. However, in the shader, instead of just outputting the pixels directly, we'll compute the convolution.</p>
</div>

</body></html>